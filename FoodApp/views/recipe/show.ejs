<% layout('layout/boilerplate') -%> <% include('../partial/navbar.ejs') -%>
<div class="row">
  <div class="card mb-3 col-6">
    <h2><%= recipe.title %></h2>
    <h4>Description</h4>
    <h6><%= recipe.description %></h6>
    <div class="ingredients">
      <!-- Ingredients -->
      <h4>Ingredients</h4>
      <h6><%= recipe.ingredients %></h6>
    </div>
    <div class="directions">
      <h4>Directions</h4>
      <h6><%= recipe.directions %></h6>
    </div>
  </div>
</div>
<form
  method="GET"
  action="/recipes/<%= recipe._id %>/edit"
>
  <button class="btn btn-success">Edit</button>
</form>
<form
  action="/recipes/<%= recipe._id  %>?_method=DELETE"
  method="POST"
>
  <button class="btn btn-danger">Delete</button>
</form>
<!--  -->
<h2>Leave a Review</h2>
<form
  action="/recipes/<%= recipe._id %>/reviews"
  method="POST"
  class="mb-3 needs-validation"
  novalidate
>
  <div class="mb-3">
    <label
      class="form-label"
      for="rating"
      >Rating</label
    >
    <input
      class="form-range"
      type="range"
      min="1"
      max="5"
      name="review[rating]"
      id="rating"
    />
  </div>
  <div class="mb-3">
    <label
      class="form-label"
      for="body"
      >Review</label
    >
    <textarea
      class="form-control"
      name="review[body]"
      id="body"
      cols="30"
      rows="3"
      required
    ></textarea>
  </div>
  <button class="btn btn-success">Submit</button>
</form>
<% for (let oneReview of recipe.reviews) { %>
<div class="card mb-3">
  <div class="card-body">
    <h5 class="card-title">Rating: <%= oneReview.rating %></h5>
    <!-- <h6 class="card-subtitle mb-2 text-muted"></h6> -->
    <p class="card-text">Review: <%= oneReview.body %></p>
    <form
      action="/recipes/<%= recipe._id  %>/reviews/<%= oneReview._id  %>?_method=DELETE"
      method="POST"
    >
      <button class="btn btn-danger">Delete</button>
    </form>
  </div>
</div>
<% } %> <% include('../partial/footer.ejs') -%>
